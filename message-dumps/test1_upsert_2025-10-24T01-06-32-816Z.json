{
  "event": "messages.upsert",
  "type": "notify",
  "timestamp": "2025-10-24T01:06:32.816Z",
  "sessionId": "test1",
  "messages": [
    {
      "key": {
        "remoteJid": "558699671739-1613580002@g.us",
        "fromMe": false,
        "id": "AC31DF1924FC418E18CF978DB8D35712",
        "participant": "10978104242205@lid",
        "participantAlt": "5511913372146@s.whatsapp.net",
        "addressingMode": "lid"
      },
      "messageTimestamp": 1761267992,
      "pushName": "ùêèùêûùêùùê´ùê® ùêáùêûùêßùê´ùê¢ùê™ùêÆùêû œü‚Å©",
      "broadcast": false,
      "message": {
        "senderKeyDistributionMessage": {
          "groupId": "558699671739-1613580002@g.us",
          "axolotlSenderKeyDistributionMessage": "Mwi26IwSECwaINcTcFChRXV7DVqJMFI0n9nJk9XvCiU09Fd6s+wYPWUxIiEFKX+q+hqDXCh8U8G78xpQ2+uIFVcu/chxrYP2yGq6WiM="
        },
        "extendedTextMessage": {
          "text": "# An√°lise do Funcionamento Interno de Coleta de Dados e Banimento no WhatsApp\n\n## Introdu√ß√£o\n\nEste documento analisa o funcionamento de componentes internos do WhatsApp, baseando-se em trechos de c√≥digo de sua aplica√ß√£o. O objetivo √© explicar, em termos simples, como a plataforma coleta informa√ß√µes e por que essa coleta √© fundamental para o sistema de banimento de contas.\n\n√â crucial entender que, embora as mensagens sejam protegidas por criptografia de ponta a ponta (impedindo a leitura do *conte√∫do*), a plataforma coleta uma vasta quantidade de **metadados** (informa√ß√µes *sobre* sua atividade). S√£o esses metadados que os sistemas automatizados usam para identificar viola√ß√µes dos termos de servi√ßo.\n\n---\n\n## 1. O Sistema de Coleta de Metadados de Conversas\n\nO WhatsApp utiliza um sistema de registro de eventos robusto e automatizado. O c√≥digo analisado revela um componente central focado em agregar e enviar estat√≠sticas detalhadas sobre cada conversa do usu√°rio.\n\n### Como Funciona:\n\n1.  **Coleta Cont√≠nua:** Um m√≥dulo em segundo plano monitora constantemente a atividade do usu√°rio em cada conversa (individual ou em grupo). Ele n√£o l√™ o que voc√™ escreve, mas conta *tudo* o que voc√™ faz.\n2.  **Agrega√ß√£o de Dados:** Este m√≥dulo agrupa uma lista detalhada de m√©tricas, incluindo:\n    * **Contagem de Mensagens:** Total de mensagens enviadas, recebidas, lidas e n√£o lidas.\n    * **Encaminhamentos:** Total de mensagens encaminhadas enviadas e recebidas.\n    * **Rea√ß√µes:** Total de rea√ß√µes enviadas e recebidas.\n    * **Edi√ß√µes:** N√∫mero de mensagens que foram editadas.\n    * **M√≠dia de Visualiza√ß√£o √önica:** Contagem de m√≠dias de visualiza√ß√£o √∫nica enviadas, recebidas e, mais importante, *abertas*.\n    * **Chamadas:** N√∫mero de chamadas oferecidas (feitas), recebidas e a dura√ß√£o total das chamadas.\n    * **Intera√ß√µes com Bots:** Contagem de mensagens enviadas e recebidas de contas de bot.\n    * **Atributos da Conversa:** Informa√ß√µes como:\n        * Se √© um grupo e o tamanho do grupo.\n        * Se a conversa est√° arquivada, fixada ou silenciada.\n        * Se √© uma conversa com \"voc√™ mesmo\".\n3.  **Anonimiza√ß√£o e Envio:**\n    * Para (supostamente) anonimizar os dados, o sistema usa uma \"chave secreta\" local para gerar um **identificador √∫nico (ID) para cada conversa**. Isso permite que o WhatsApp rastreie a *atividade* de uma conversa espec√≠fica ao longo do tempo sem, teoricamente, vincul√°-la diretamente ao seu n√∫mero de telefone em seus servidores de an√°lise.\n    * Periodicamente, esses \"pacotes\" de estat√≠sticas s√£o enviados aos servidores do WhatsApp.\n4.  **Limpeza:** Ap√≥s o envio bem-sucedido dos dados, os registros locais de estat√≠sticas s√£o apagados para economizar espa√ßo e reiniciar a contagem.\n\n### O \"Gerenciador\" de Coleta\n\nOutro trecho de c√≥digo atua como um \"gerenciador\" ou \"agendador\" para todo esse processo. Sua √∫nica fun√ß√£o √© \"acordar\" periodicamente (a cada 10 ou 20 segundos) e garantir que todos os diferentes tipos de dados anal√≠ticos coletados (eventos de envio de mensagem, eventos de recebimento, erros de criptografia, etc.) sejam processados e enfileirados para envio.\n\n---\n\n## 2. Rastreamento de Eventos Espec√≠ficos (Crescimento e Convites)\n\nAl√©m das estat√≠sticas gerais, o sistema tamb√©m rastreia eventos muito espec√≠ficos que indicam como as contas est√£o interagindo e crescendo.\n\nUm dos m√≥dulos analisados lida especificamente com \"notifica√ß√µes de crescimento\". Um exemplo claro √© o que acontece quando um usu√°rio entra em uma conversa atrav√©s de um **link de convite**.\n\n### Como Funciona:\n\n1.  O sistema recebe uma notifica√ß√£o do servidor de que um novo usu√°rio aceitou um convite.\n2.  O aplicativo verifica se j√° existe uma conversa com esse usu√°rio. Se n√£o houver, ele **cria automaticamente um novo chat**.\n3.  Ele ent√£o insere uma mensagem de sistema na conversa (ex: \"O usu√°rio X entrou usando um link de convite\").\n4.  **Crucialmente**, ele tamb√©m registra e envia um evento de an√°lise espec√≠fico para esta a√ß√£o, marcando que **\"um novo chat foi criado atrav√©s de um convite\"**.\n\nIsso demonstra que a plataforma monitora ativamente n√£o apenas *o quanto* voc√™ conversa, mas *como* suas conex√µes sociais s√£o formadas.\n\n---\n\n## 3. Por que Isso Leva ao Banimento?\n\nA coleta massiva de metadados, conforme descrito acima, √© a ferramenta mais poderosa do WhatsApp contra spam e abuso. Ela permite que a plataforma crie uma **\"linha de base comportamental\"** detalhada do que constitui um usu√°rio humano normal.\n\nContas s√£o banidas quando seus padr√µes de metadados se desviam drasticamente dessa linha de base, acionando \"bandeiras vermelhas\" (red flags) automatizadas.\n\n### Padr√µes de Metadados que Causam Banimento:\n\n* **Envio em Massa (Spam):**\n    * **O que o sistema v√™:** Uma contagem de `messagesSent` (mensagens enviadas) alt√≠ssima, com uma contagem de `messagesReceived` (mensagens recebidas) muito baixa.\n    * **Por que bane:** Um humano normal tem uma propor√ß√£o equilibrada. Um spammer dispara milhares de mensagens e recebe poucas respostas (ou √© bloqueado).\n\n* **Encaminhamento Excessivo (Dissemina√ß√£o de Conte√∫do):**\n    * **O que o sistema v√™:** Uma propor√ß√£o muito alta de `forwardMessagesSent` (encaminhamentos) em compara√ß√£o com mensagens originais.\n    * **Por que bane:** Indica que a conta n√£o est√° sendo usada para comunica√ß√£o pessoal, mas como um \"disparador\" de conte√∫do, um comportamento t√≠pico de bots de desinforma√ß√£o.\n\n* **Cria√ß√£o de Chat em Massa:**\n    * **O que o sistema v√™:** Uma conta que inicia dezenas ou centenas de novas conversas em um curto per√≠odo, especialmente com usu√°rios que n√£o est√£o em seus contatos (o sistema tamb√©m rastreia isso).\n    * **Por que bane:** Um usu√°rio normal adiciona contatos lentamente. Um spammer geralmente carrega uma lista e tenta contatar todos de uma vez.\n\n* **Adi√ß√£o em Massa a Grupos:**\n    * **O que o sistema v√™:** Uma conta que cria muitos grupos ou adiciona um grande n√∫mero de pessoas (`groupSize`) que n√£o t√™m essa conta em seus contatos.\n    * **Por que bane:** Esse √© um comportamento cl√°ssico de spam.\n\n* **Ser Bloqueado/Denunciado Rapidamente:**\n    * **O que o sistema v√™:** Embora n√£o esteja diretamente no c√≥digo analisado, este √© o metadado mais fatal. Quando uma conta envia uma mensagem (gerando um `threadId` √∫nico) e dezenas de destinat√°rios denunciam ou bloqueiam essa conversa, o sistema de an√°lise cruza essa informa√ß√£o.\n    * **Por que bane:** √â a confirma√ß√£o definitiva de que a atividade da conta √© indesejada.\n\n## Conclus√£o\n\nO banimento no WhatsApp raramente se deve ao *conte√∫do* da sua mensagem (que √© criptografado). Ele ocorre por causa do **seu *padr√£o* de comportamento**, que √© meticulosamente registrado atrav√©s dos metadados.\n\nOs c√≥digos analisados s√£o os \"oper√°rios\" que constroem o caso contra uma conta infratora. Eles coletam as evid√™ncias (estat√≠sticas de envio, encaminhamento, cria√ß√£o de chat) que os sistemas automatizados de \"Intelig√™ncia Artificial\" do WhatsApp usam para identificar e banir contas que agem como bots ou spammers, protegendo assim a integridade da plataforma.",
          "previewType": "NONE",
          "contextInfo": {
            "forwardingScore": 1,
            "isForwarded": true
          },
          "inviteLinkGroupTypeV2": "DEFAULT"
        },
        "messageContextInfo": {
          "messageSecret": "KI4R7YR2L+EYeIytz+2h7J6ytQg/gpNVkte+Fi/YMnk="
        }
      }
    }
  ]
}